(function(){let query='',now=parseInt(+(new Date())/1000),ispost=window.ZayyCP==='true';query+=('access_token='+window.Y38adQ);query+=('&site_id='+window.GgLpVi);query+='&start_date=20210301';query+=('&end_date='+now);query+='&metrics=visitor_count';query+='&method=visit/toppage/a';$.ajax({url:'https://openapi.baidu.com/rest/2.0/tongji/report/getData?'+query,type:'GET',success:function(res){let re=(res||{}).result||{};if(!(re.hasOwnProperty('sum')&&re.hasOwnProperty('items'))){return}let result=handleData(re);if(ispost){let exist=result.items.find(function(d){return d.name==location.href});if(exist){$('.visitor_area').css('display','inline');$('#visit_count').text(exist.count||0)}}else{$('.visitor_area').css('display','inline');$('#visit_count').text(result.total||0)}},error:function(e){console.log(e.message)}});function handleData(data){let sum=data.sum[0][0],items=data.items||[];let itemBuffer=items[0].map(function(item,index){item[0].count=items[1][index][0];item[0].name+='/';return item[0]});return{total:sum,items:itemBuffer}}})();